#!/bin/sh

# X11 Dynamic Menu
# ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

# ...................................................................... Browser

# usage: dbrowser uri

m() {
  which $@ >/dev/null 2>&1 && echo -n "$@\\n"
}

while browser=$(echo -e \
                        $(m vimb) \
                        $(m vimb-detached) \
                        $(m chromium) \
                        $(m dwb) \
                        $(m elinks) \
                        $(m firefox) \
                        $(m hbro) \
                        $(m iceweasel) \
                        $(m jumanji) \
                        $(m lispkit) \
                        $(m luakit) \
                        $(m midori) \
                        $(m opera) \
                        $(m qutebrowser) \
                        $(m surf) \
                        $(m uzbl) \
                        $(m w3m) \
                        $(m xombrero) \
              | $(dmenu) -p 'Browser') || exit
do
  case ${browser# } in
    elinks \
  | w3m)            urxvt -title "$browser" -e $browser $@ ;;
    chromium)       chromium -app=$@ ;;
    dwb \
  | firefox \
  | google-chrome \
  | iceweasel \
  | hbro \
  | jumanji \
  | luakit \
  | lispkit \
  | midori \
  | opera \
  | qutebrowser \
  | surf \
  | uzbl \
  | vimb \
  | vimb-detached \
  | xombrero)       eval $browser "$@"
                    ;;
    *)              echo ".. unknown browser: $browser"
                    continue
                    ;;
  esac
  exit
done
