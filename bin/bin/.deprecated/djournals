#!/bin/sh

# X11 Dynamic Menu
# ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

# ..................................................................... Sysadmin

# view systemd journal logs
[[ $* ]] && mode='Follow' || mode='View'

cd /usr/lib/systemd/system/
service=$(stest -fl . \
  | sort  \
  | $(dmenu) -p "$mode Journal") || break

case $mode in
  View)     [[ $service ]] && urxvt -title "$service" -e journalctl -u $service ;;
  Follow)   [[ $service ]] && urxvt -title "$service" -e journalctl -fu $service ;;
esac
