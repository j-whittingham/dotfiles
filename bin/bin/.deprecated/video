#!/bin/sh
# manually manage xscreensaver for video media
# video <player>

player=$1; shift
if [ ! "$(pidof $player.original)" ]; then
    # kill dangling screensavers
    screentrimmer 0
    killall xscreensaver
    xset s off -dpms
    # if compositing causes choppy video
    [ -f ~/.compositing ] && killall compton 2>/dev/null

    # using pulseaudio now
    #[ $(hostname) = luna ] && asound-usb.sh
    # execute original binary
    $player.original $@

    if [ ! "$(pidof vlc.original)" -a ! "$(pidof xbmc.original)" ]; then
        pidof compton || compton &
        xset s on +dpms
        xscreensaver -no-splash &
    fi
fi
