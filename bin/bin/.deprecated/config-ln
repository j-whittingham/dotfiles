#!/bin/sh
# fix absolute links to relative links to home directory

links=$(mktemp)
ls -l | grep " -> $HOME" | awk '{ print $9,$11; }' > $links

while read line
do
  echo $line
  link=$(echo $line | awk '{ print $1; }')
  target=$(echo $line | awk '{ print $2; }' | sed "s,$HOME/,,")
  rm -f $link
  ln -sv ../$target $link
  echo
done <$links
