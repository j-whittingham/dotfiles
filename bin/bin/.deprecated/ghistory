#!/bin/sh

# X11 Dynamic Menu
# ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

# ...................................................................... Browser

# history (chromium)
history=~/.config/chromium/Default/History
# filter='ERROR:|localhost|luakit:|Page not found|[Ss]earch'
filter='ERROR:|localhost|luakit:|Page not found'

py-chrome-history.py $history $history.html
uri=$(tac $history.html \
    | egrep -v '$filter' \
    | grep 'http://' \
    | sed 's/.*<a href="\([^"]*\)">\([^<]*\)<.*/\1  ::  \2/g' \
    | $(dlist) -p 'Google History:'\
    | cut -d' ' -f1)
[[ $uri ]] && dbrowser "$uri"
