#!/bin/sh

# X11 Dynamic Menu
# ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

# ........................................................................ Shell

# dmenu zsh history
cmd=$(sort -r --field-separator=: --key=2 ~/.zhistory \
    | cut -d';' -f2- \
    | sed -e 's/^\s*//' -e 's/\\$//' \
    | egrep -v '^(#|\S*$)' \
    | $(dlist) -p 'Zsh History')

if [[ $cmd ]]; then
  notify "Ctrl-Alt-V" "$(echo $cmd | sed -e 's/[&][&]/and/g' -e 's/[&]/ampersand/')"
  # echo -n "$cmd" | xclip
  echo -n "$cmd" | xsel -i
fi
