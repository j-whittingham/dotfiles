#!/usr/bin/dash

# Shell
# ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

# .................................................................... Processes

# Usage: catch 'process name' [post message]

delay=0.01

if [ "$*" ] ;then
  # let the process we're trapping have a chance to start up..
  while [ $(pgrep -cf "$@") -le 2 ]
  do
    sleep $delay
  done
  # ..until process is no more
  while [ $(pgrep -cf "$@") -gt 2 ]
  do
    sleep $delay
  done
  [ $2 ] && echo ".. $2"
fi

# vim: set ft=sh: #
