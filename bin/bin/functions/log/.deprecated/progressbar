#!/usr/bin/dash

# Log
# ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

# ${_colors_} defined in .zshenv

# ....................................................................... Prompt

# Usage: processbar 'process identifier' [comment]

interval=${interval:-1.5}

# meter process
if [ "$*" ] ;then
  # disable job control (messages)
  set +m
  setterm -cursor off
  printf "${_YELLOW_}"
  [ "$2" ] && echo "$2"
  while pgrep -x "$1" >/dev/null
  do
    printf "${_YELLOW_}${gauge}╼${_red_}"
    sleep $interval
    gauge='\b─'
  done
  setterm -cursor on
  echo "${_nocolor_}"
  # restore job control (default)
  set -m
fi

# vim: set ft=sh: #
