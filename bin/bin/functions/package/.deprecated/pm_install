#!/usr/bin/dash
# sdothum - 2016 (c) wtfpl

# Package
# ▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂

# ${COLORS} defined in env

# ......................................................... Distribution install

# Usage: pm_install [--confirm | S] <package>

[ "$1" = S ] && { shift ; confirm=true ;}

if which pacopts >/dev/null 2>&1 ;then
  pacaur='pacopts aur -I'
elif which pacaur >/dev/null 2>&1 ;then
  pacaur='pacaur -S' ; edit=--edit ; noedit=--noedit
else
  pacaur='yaourt -S'
fi

heading : $@

if ! pm_query $@ ;then
  pre_install $@
  if pacman -Ss $@ | grep -q --regex="/$@ " ;then
    [ $confirm ] && sudo pacman -S $@ || sudo pacman -S --noconfirm $@
  else
    echo "${__GREEN}@ aur${NOCOLOR}"
    [ $confirm ] || [ ${pacaur%% *} = pacopts ] && $pacaur $edit $@ || $pacaur --noconfirm $noedit $@
  fi
  post_install $@
fi

unset confirm

# vim: set ft=sh: #
