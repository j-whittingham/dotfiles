#!/usr/bin/dash
# sdothum - 2016 (c) wtfpl

# Package
# ══════════════════════════════════════════════════════════════════════════════

# ......................................................... Distribution install

usage() {
  echo "usage: $(basename $0) [L] <path/file>"
  exit 1
}

[ $1 ] || usage
[ $1 = L ] && { shift; link=true; }  # link vs copy

root=$HOME/build/root                # restore customizations (not typically config files)

if [ $1 ] ;then
  original $1
  [ $# -eq 2 ] && host=.$2
  mkdir -pv ${1%/*} || exit 1
  [ -e $1 ] && original $1
  if [ $link ] ;then
    ditto linking "$(sudo ln -sfv $root/.${1}$host $1)"
  else
    ditto copying "$(sudo cp -rv --preserve=mode --no-preserve=ownership $root/.${1}$host ${1%/*})"
  fi
  ditto -- "check customization $1"
fi

# vim: set ft=sh: #
