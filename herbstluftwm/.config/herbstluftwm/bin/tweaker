#!/usr/bin/dash
# sdothum - 2016 (c) wtfpl
[ $TRACE ] && CHILD="bin/tweaker $@" . $PARENT

# herbstluftwm
# ══════════════════════════════════════════════════════════════════════════════

# ................................................................. Tweak layout

# Usage: tweaker [&]

SESSION=${SESSION:-$HOME/.session}
# set one of these parameters
layout="$SESSION/frame_gap $SESSION/margin $SESSION/panel_height $SESSION/panel_indent $SESSION/window_gap"

settings() { for i in $layout ;do [ -e $i ] && ditto $(echo $i | tr ' ' '\n' | sed "s|$SESSION/||") "$(cat $i)" ;done }

# for dynamic rice tweaking
ditto tweaker "cd $SESSION"
settings
while : ;do
  sleep 1
  stest -n $PMARGIN $layout >/dev/null || continue
  herbstclient detect_monitors  # reset monitor margins
  killall -q lemonbar
  draw monitor fullframe
  draw panel
  toggle compton on
  settings
done

# vim: set ft=sh: #
