#!/bin/sh
# install base packages

sudo pacman -Syu
sudo pacman -S --noconfirm base-devel
sudo pacman -S --noconfirm yaourt
yaourt -Syu
yaourt -S --noconfirm packer
packer -S --noconfirm yaourt-gui
yaourt -S --noconfirm powerpill

if [ $(hostname) = luna ]; then
  sudo pacman -s --noconfirm spl
  sudo pacman -s --noconfirm spl-utils
  sudo pacman -S --noconfirm zfs
  sudo pacman -S --noconfirm zfs-utils
  sudo systemctl enable zfs.service
  sudo systemctl start zfs.service
fi

if [$(hostname) = monad]; then
  sudo pacman -S --noconfirm cpupower
  sudo sed -i "s/^#governor='ondemand'/governor='ondemand'/" /etc/default/cpupower
  sudo systemctl enable cpupower.service
  sudo systemctl start cpupower.service
fi

sudo pacman -S --noconfirm bc
packer -S --noconfirm  fortune-mod
# find /usr/local -name fish -exec sudo mv -v {} {}.debian \;
packer -S --noconfirm fish-shell-git
# cd /usr/lib && [ ! -f libtinfo.so.5 ] && sudo ln -sv libncurses.so.5 libtinfo.so.5
sudo chsh -s /usr/bin/fish shum
[ -d $HOME/luna ] && mkdir -p $HOME/.config/fish && ln -sfv $HOME/luna/Dropbox/debian/.config/fish/functions $HOME/.config/fish/

sudo pacman -S --noconfirm gvim
[ -d $HOME/luna ] && ln -sv $HOME/luna/.vimrc $HOME/ && ln -sv $HOME/luna/.vim $HOME/
sudo ln -s /home/shum/.vimrc /root/
sudo ln -s /home/shum/.vim /root/
grep -q '^EDITOR=vim' $HOME/.bashrc || sed -i '$aEDITOR=vim' $HOME/.bashrc
cat $HOME/.bashrc
echo "..press return to continue.."
read

sudo pacman -S --noconfirm ghc
sudo pacman -S --noconfirm xmonad
sudo pacman -S --noconfirm xmonad-contrib
sudo pacman -R --noconfirm conky && packer -S --noconfirm conky-lua
sudo pacman -S --noconfirm dzen2
sudo pacman -S --noconfirm terminator
sudo pacman -S --noconfirm trayer
[ -f /etc/slim.conf ] && (grep -q 'xmonad' /etc/slim.conf || sudo sed -i 's/openbox,/xmonad,openbox,/' /etc/slim.conf)
if [ $(hostname) = manjaro ]; then
  cp -Rv $HOME/luna/.xmonad $HOME/
  cp -fv $HOME/luna/.config/xmonad/xmonad.hs $HOME/.xmonad
fi
grep -q 'xmonad' $HOME/.xinitrc || sed -i '$aexec xmonad' $HOME/.xinitrc
cat $HOME/.xinitrc
yaourt -S freetype2-infinality
packer -S --noconfirm fontconfig-infinality

sudo pacman -S --noconfirm network-manager-applet
# sudo systemctl enable NetworkManager
# sudo systemctl start NetworkManager
echo "..reboot to restart X with infinality fonts and configure networkmanager wireless gui"
