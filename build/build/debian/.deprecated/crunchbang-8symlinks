#!/usr/bin/env fish
# rebuild symbolic links
#
# ll | a '\-\>' | awk '{ printf "ln -sfv %s %s \n", $11, $9; }'

function save
    [ -d $argv -a ! -f $argv.save ]; and cp -r $argv $argv.save 2>/dev/null
    or [ -f $argv -a ! -f $argv.save ]; and cp $argv $argv.save
end

function ln-config
    save ~/.$argv; ln -sfv ~/.config/$argv ~/.$argv
end

function ln-share
    ln -sfv ~/Dropbox/debian/.local/share/$argv ~/.local/share/$argv
end

function ln-debian
    ln -sfv ~/Dropbox/debian/.config/$argv ~/.config/$argv; ln-config $argv
end

# rebuild symbolic links for application ~/.config and ~/.rc files
save ~/.abook
ln -sfv ~/.config/mail/abook ~/.abook
ln-debian asoundrc
#ln -sfv ~/Dropbox/debian/.config/autokey/autokey.json ~/.config/autokey/autokey.json
ln -sfv ~/Dropbox/debian/.config/autokey/data ~/.config/autokey/data
ln-debian bash_aliases
ln-debian canto
#ln -sfv ~/.config/conkyrc ~/.conkyrc
ln-config elinks
ln -sfv ~/Dropbox/debian/.config/fish/config.fish ~/.config/fish/config.fish
ln -sfv ~/Dropbox/debian/.config/fish/user.fish ~/.config/fish/user.fish
ln -sfv ~/Dropbox/debian/.config/fish/functions ~/.config/fish/functions
ln-debian fonts
ln -sfv ~/.config/hgrc ~/.hgrc
ln-debian icons
save ~/.imapfilter
ln -sfv ~/.config/mail/imapfilter ~/.imapfilter
ln-debian inputrc
ln-config ion3
ln-config irssi
ln -sfv ~/.config/slrn/jnewsrc ~/.jnewsrc
ln -sfv ~/.config/slrn/jnewsrc.dsc ~/.jnewsrc.dsc
ln-share luakit/bookmarks.db
ln-share luakit/scripts
ln-share luakit/styles
ln-debian luarc
ln -sfv ~/.config/mail/mailcap ~/.mailcap
ln -sfv ~/.config/mail/msmtprc ~/.msmtprc
chmod 600 ~/.config/mail/msmtprc
save ~/.mutt
ln -sfv ~/.config/mail/mutt ~/.mutt
ln -sfv ~/.config/mail/muttrc ~/.muttrc
ln-debian mpdconf
ln-debian nanorc
ln-debian netrc
ln-debian ncmpcpp
for file in ~/Dropbox/debian/.config/notion/*.lua
    ln -sfv $file ~/.config/notion/(basename $file)
    ln -sfv ~/.config/notion/(basename $file) ~/.notion/(basename $file)
end
ln -sfv ~/.config/nzbget/nzbget.conf ~/.nzbget.conf
ln -sfv ~/.config/mail/offlineimaprc ~/.offlineimaprc
ln-debian pentadactylrc
ln -sfv ~/.config/purple/smileys ~/.purple/smileys
ln-debian pyradio
ln -sfv ~/Dropbox/debian/.config/rox.sourceforge.net ~/.config/
ln-debian rtorrent.rc
ln-debian rubyroomrc
ln-debian screenrc
ln-debian screensaver
mkdir ~/.ssh 2>/dev/null
ln -sfv ~/.config/ssh/config ~/.ssh/config
ln -sfv ~/.config/mail/signature ~/.signature
ln -sfv ~/.config/slrn/slrnrc ~/.slrnrc
ln -sfv ~/Dropbox/debian/.config/sup/* ~/.config/sup
ln -sfv ~/.config/sup/* ~/.sup
ln -sfv ~/tmp/sup.log ~/.sup/log
ln-debian themes
ln-debian tixati
ln-debian tmux.conf
ln -sfv ~/Dropbox/.todo ~/.todo
ln-debian ttytterrc
ln -sfv ~/Dropbox/debian/.config/tyrs ~/.config/tyrs
ln -sfv ~/.config/mail/urlview ~/.urlview
ln-debian vifm
ln-debian vim
ln -sfv ~/.config/vim/vimrc ~/.vimrc
ln-debian vromerc
ln-debian w3m
ln-debian xinitrc
ln-debian Xdefaults
ln-debian Xresources
ln-debian xscreensaver
#ln-debian xsession

# todo symlinks
ln -sfv ~/Dropbox/.todo/todo.sh ~/bin/todo
ln -sfv ~/Dropbox/.todo/todo-screen.sh ~/bin/todo-screen

# launchy symlinks
#ln -sfv ~/.config/launchy/history.db
#ln -sfv ~/.config/launchy/launchy.ini
#ln -sfv ~/.config/launchy/launchy.db

# create mailbox links for mutt listing
#cd ~/.mail/gmail
#cd ~/.mail/gmail/system
#ln -sfv Spam Junk
#cd ~/.mail/gmail/user
#cd ~/.mail/.notmuch
#ln -sfv /home/shum/.cache/mutt_results =Search

