#!/usr/bin/env fish
# symlink common config files that are tweaked with regularity

cd ~/Dropbox/debian/.config
for entry in *
    # exclude a few folders that are not symlinked at the folder level (see crunchbang-8symlinks.sh) 
    if [ (echo $entry | egrep "autokey|fish|terminator"). = . ]
        echo
        echo :: $entry
        if [ -f ~/.config/$entry -o -d ~/.config/$entry ]
            if [ ! -f ~/.config/$entry.save -a ! -d ~/.config/$entry.save ]
                mv -v ~/.config/$entry ~/.config/$entry.save
            end
        end
        if [ -f ~/.config/$entry ]
            rm -fv ~/.config/$entry
        elif [ -d ~/.config/$entry ]
            command rm -rfv ~/.config/$entry
        end
        cd ~/.config
        ln -sfv ../Dropbox/debian/.config/$entry .
        cd -
    end
end
