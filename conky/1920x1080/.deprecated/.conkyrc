#==============================================================================
#                                 conkyrc_grey
#
#  author  : SLK
#  version : v2011011601
#  license : Distributed under the terms of GNU GPL version 2 or later
#
#==============================================================================

background yes
update_interval 1

cpu_avg_samples 2
net_avg_samples 2
temperature_unit celsius

double_buffer yes
no_buffers yes
text_buffer_size 2048

# gap_x 15
gap_x 1240
gap_y 15
minimum_size 185 900
maximum_width 185
own_window yes
# own_window_type panel
own_window_type dock
own_window_transparent yes
# own_window_hints undecorate,sticky,skip_taskbar,skip_pager,below
own_window_hints sticky,above
border_inner_margin 0
border_outer_margin 15
alignment tr

draw_shades no
draw_outline no
draw_borders no
draw_graph_borders no

override_utf8_locale yes
use_xft yes
xftfont Noto Sans:size=6
xftalpha 0.5
uppercase no

# default_color FFFFFF
default_color F38057
color0 EF5A29
color1 DDDDDD
color2 AAAAAA
color3 888888
color4 666666
color5 444444

lua_load ~/.conky/conky-rings.lua
lua_draw_hook_post main

TEXT
${voffset 63}
${goto 105}${color0}${font Noto Sans:size=18}${time %e}
${goto 67}${color1}${voffset -22}${font Noto Sans:size=9}${time %A}
${goto 75}${color3}${voffset -2}${font Noto Sans:size=8}${time %b}${voffset -2}  ${color5}${font Noto Sans:size=14}'${time %y}
${voffset 20}${font}${color3}${alignr}${time %-Vw  /  %-jd}
${voffset -210}${font Noto Sans:size=40:style=Normal}${if_match "${exec cat ~/.windowmanager}" == "bspwm"}${color3}${alignr} ${exec bspc query -D -d focused}${else}${if_match "${exec cat ~/.windowmanager}" == "herbstluftwm"}${if_match "${exec query hidden focus}" == "hidden"}${color9}${else}${color3}${endif}${alignr} ${exec query desktop focus}${endif}${endif}

${voffset -233}
${if_match "${exec cat ~/.windowmanager}" == "bspwm"}${font}${color3}${alignr}${exec [[ $(bspc query -T | grep "$(bspc query -W -w)" | wc -l) -eq 1 ]] && (bspc query -T | grep "$(bspc query -W -w)" | awk '{ print $3; }') || echo}${else}${if_match "${exec cat ~/.windowmanager}" == "herbstluftwm"}${font}${color3}${alignr}${exec query window}${endif}${endif}
${voffset 127}
${goto 65}${font}${color1}${texeci 900 conky weather}
${goto 75}${font}${color2}${kernel} ${alignr}${uptime}
#
# ${voffset 18}
# ${goto 85}${font Noto Sans:size=6:style=Bold}${color}MPD ${alignr}${mpd_status}
# # # ${goto 85}${font}${color1}volume
# ${goto 85}${font}${color0}${lua_parse null ${mpd_title}}
# ${goto 85}${font}${color0}${alignr}${lua_parse null ${mpd_artist}}
${voffset 12}
${goto 85}${loadgraph 20,0 EF5A29 8E2C0A -t}
${voffset -5}${goto 85}${font}${color1}Load ${alignr}${loadavg 1}   ${loadavg 2}   ${loadavg 3}

${voffset 25}
${goto 85}${font Noto Sans:size=6:style=Bold}${color}${execi 3600 cat /proc/cpuinfo | grep 'model name' | sed -e 's/model name.*: //' | uniq | cut -d' ' -f2-4 | sed -e 's/(.*)//' -e 's/ CPU//'} ${alignr}${exec echo "3 k $(sudo cat /sys/devices/system/cpu/cpu*/cpufreq/cpuinfo_cur_freq) + 2 / 1000000 / .005 + 2 k 1 / p" | dc}Ghz
# ${goto 85}${font Noto Sans:size=6:style=Bold}${color0}Temp ${alignr}${exec sensors | grep 'Core .:' | sed -e 's/^.*  [+]//' -e 's/...C  (.*$//' | sort | tail -1}°C
# ${goto 85}${font Noto Sans:size=6:style=Bold}${color0}Temp ${alignr}${exec echo "1 k $(sensors | grep 'Core .:' | sed -e 's/^.*  [+]//' -e 's/...C  (.*$//') + 2 / .5 + 0 k 1 / p" | dc}°C
${goto 85}${font Noto Sans:size=6:style=Bold}${color0}Temp ${alignr}${execi 1 sensors | grep 'Core .:' | sed -e 's/^.*  [+]//' -e 's/...C  (.*$//' | sort | head -1}°C
# ${goto 85}${font Noto Sans:size=6:style=Bold}${color1}${threads} processes ${alignr}${cpu cpu0}%
${goto 85}${font}${color1}${top name 1}${alignr}${top cpu 1}%
${goto 85}${font}${color2}${top name 2}${alignr}${top cpu 2}%
${goto 85}${font}${color3}${top name 3}${alignr}${top cpu 3}%
${goto 85}${font}${color4}${top name 4}${alignr}${top cpu 4}%
${goto 85}${font}${color5}${top name 5}${alignr}${top cpu 5}%
# ${goto 85}${font}${color2}GPU  ${alignr}${hwmon 1 temp 1}°C
${goto 85}${cpugraph 20,0 EF5A29 8E2C0A -t}
${voffset -5}${goto 85}${font}${color1}${threads} processes ${alignr}${cpu cpu0}%

${voffset 25}
${goto 85}${font Noto Sans:size=6:style=Bold}${color}MEM ${alignr}${mem}
${goto 85}${font Noto Sans:size=6:style=Bold}${color0}Tmp ${alignr}${fs_used /tmp}
${goto 85}${font}${color1}${top_mem name 1}${alignr}${top_mem mem_res 1}
${goto 85}${font}${color2}${top_mem name 2}${alignr}${top_mem mem_res 2}
${goto 85}${font}${color3}${top_mem name 3}${alignr}${top_mem mem_res 3}
${goto 85}${font}${color4}${top_mem name 4}${alignr}${top_mem mem_res 4}
${goto 85}${font}${color5}${top_mem name 5}${alignr}${top_mem mem_res 5}

${voffset 25}
# ${goto 85}${font Noto Sans:size=6:style=Bold}${color}DISKS ${alignr}${fs_type /var}
${goto 85}${font Noto Sans:size=6:style=Bold}${color}/boot ${alignr}${fs_used /}
${goto 85}${font Noto Sans:size=6:style=Bold}${color0}swap ${alignr}${lua_parse swap ${swap}}
# ${goto 85}${font Noto Sans:size=6:style=Bold}${color0}/tmp ${alignr}${fs_used /tmp}
${goto 85}${diskiograph 20,0 F38057 EF5A29 -t}
${voffset -5}${goto 85}${font}${color1}Disk I/O ${alignr}${lua_parse bandwidth ${diskio}}

${voffset 25}
${goto 85}${font Noto Sans:size=6:style=Bold}${color}wls4 ${alignr}${addr wls4}${font Noto Sans:size=6}
${goto 85}${color2}${font Noto Sans:size=6:style=Bold}${color0}${wireless_essid wls4}${font Noto Sans:size=6}
${goto 85}${downspeedgraph wls4 20,0 EF5A29 8E2C0A -t}
${voffset -33}${goto 85}${upspeedgraph wls4 20,0 F38057 EF5A29 -t}
${voffset -5}${goto 85}${font}${color1}Bandwidth ${alignr}${lua_parse bandwidth ${upspeed wls4}}↑   ${lua_parse bandwidth ${downspeed wls4}}↓
